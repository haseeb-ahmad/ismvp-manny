<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.js"></script>

<div class="container" style="display:  table-cell;">
	<div class="col-xs-12">
		<div class="row">
			<div class="col-xs-12">
				<div id="initCheck" class="alert alert-info">
					<p>Initializing.....</p>
					<p>Checking Cobrand Login Configurations</p>
				</div>
			</div>
		</div>
		<!-- Login Form -->
		<!-- Username Field -->
		<div class="row">
			<div class="form-group col-xs-12">
				<label for="username"><span class="text-danger"
					style="margin-right: 5px;">*</span>Username:</label>
				<div class="input-group">
					<input class="form-control" id="username" type="text"
						name="username"  autofocus placeholder="Username" required /> <span
						class="input-group-btn"> <label class="btn btn-primary"><span
							class="glyphicon glyphicon-user" aria-hidden="true"></span></label>
					</span>
				</div>
			</div>
		</div>

		<!-- Content Field -->
		<div class="row">
			<div class="form-group col-xs-12">
				<label for="password"><span class="text-danger"
					style="margin-right: 5px;">*</span>Password:</label>
				<div class="input-group">
					<input class="form-control" id="password" type="password"
						name="password" placeholder="Password" required /> <span
						class="input-group-btn"> <label class="btn btn-primary"><span
							class="glyphicon glyphicon-lock" aria-hidden="true"></span></label>
					</span>
				</div>
			</div>
		</div>

		<!-- Login Button -->
		<div class="row">
			<div class="form-group col-xs-4">
				<button id="yodleeSubmitButton" class="btn btn-primary" type="button" >Login</button>
			</div>
		</div>
		<div class="row spinner_loader">
			<i class="fa fa-spinner fa-spin" style="font-size:65px;"></i>
		</div>
	</div>
</div>

<style type="text/css">
	#yodleeModal .modal-header{
		background-color: #1d79c8;
		color: white;
	}
	.spinner_loader {
		text-align: center;
		color: #418bcb;
	}
</style>

<script type="text/javascript">
	$(document).ready(function(){
		$(".spinner_loader").hide();
		$('body').on('click', '#yodleeSubmitButton', function(){
			if($('#username').val() == '' || $('#password').val() == ''){
				$.toast('Username or password is invalid!');
			}else{
				$(".spinner_loader").show();
				$.ajax({
				  	url: '/users/fetch_yodlee_data',
				  	method: 'POST',
				  	data: {user: {username: $('#username').val(), password: $('#password').val()}},
				  	success: function(result){
				    	$(".spinner_loader").hide();
				    },
				    error: function(xhr, ajaxOptions, thrownError){
				    	$(".spinner_loader").hide();
				    }
				});
			}
		});
	});
</script>